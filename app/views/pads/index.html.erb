<h1>Listing pads</h1>

<table class="table sortable">
  <thead>
    <tr>
      <th><%= sortable 'name', 'Name' %></th>
      <th><%= sortable 'users_name', 'Creator' %></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @pads.each do |pad| %>
      <tr>
        <td>
          <%= pad.readonly_id if pad.is_public_readonly && current_user.nil? %>
          <%= pad.name if !pad.is_public_readonly || !current_user.nil?  %>
        </td>
        <td><%= pad.creator.name rescue 'unknown' %></td>
        <td>
          <%= link_to 'Show', '/p/'+pad.group.name+'/'+pad.name if @group.name != 'ungrouped' && !current_user.nil? %>
          <%= link_to 'Show', '/p/'+pad.name if @group.name == 'ungrouped' && !current_user.nil? %>
          <%= link_to 'Show', '/p/'+pad.readonly_id if pad.is_public_readonly && @group.name == 'ungrouped' && current_user.nil? %>
          <%= link_to 'Show', '/p/'+pad.name if !pad.is_public_readonly && @group.name == 'ungrouped' && current_user.nil? %>
        </td>
        <td><%= link_to 'Edit', edit_pad_path(pad) %></td>
        <td><%= link_to 'Destroy', pad, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Pad', new_group_pad_path(@group) %>
